!function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?module.exports=b():a.imagesStatus=b()}(this,function(){var b=function(a,c){var d="string"==typeof a?document.querySelectorAll(a):a;if(d.length){for(var e=[],f=0;f<d.length;f++)e.push(new b.init(d[f],c));return e}};return b.prototype={isCached:function(a){var b=new Image;return b.src=a,b.complete},setFailed:function(a,b){this.status.failed++,"function"==typeof a.imgFailed&&a.imgFailed.call(this,b),this.isDone()&&a.allImgFinished.call(this,this.container)},setLoaded:function(a,b){this.status.loaded++,"function"==typeof a.imgLoaded&&a.imgLoaded.call(this,b),this.isDone()&&a.allImgFinished.call(this,this.container)},isDone:function(){return this.status.loaded+this.status.failed===this.status.total}},b.init=function(a,b){var c=this;if(c.container=a,c.status={loaded:0,failed:0,total:0},c.images=images=a.getElementsByTagName("img"),c.images.length){c.status.total=c.images.length;for(var d=0;d<c.status.total;d++)c.isCached(images[d].src)?c.setLoaded(b,images[d]):images[d].addEventListener?(images[d].addEventListener("load",c.setLoaded.bind(c,b,images[d])),images[d].addEventListener("error",c.setFailed.bind(c,b,images[d]))):(images[d].attachEvent("onload",c.setLoaded.bind(c,b,images[d])),images[d].attachEvent("onerror",c.setFailed.bind(c,b,images[d])))}},b.init.prototype=b.prototype,this.jQuery&&($=jQuery,$.fn.imagesStatus=function(a){return b(this,a)}),b});
